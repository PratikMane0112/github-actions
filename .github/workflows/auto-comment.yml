name: Automate Issue and PR Responses

on:
  issues:
    types:
      - opened
      - closed
  pull_request_target:
    types:
      - opened
      - closed

permissions:
  issues: write
  pull-requests: write
  contents: write

jobs:
  respond-to-events:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      # Debug Event Data (Optional for troubleshooting)
      - name: Debug Event Data
        run: echo "${{ toJSON(github.event) }}"

      # Respond to new issues
      - name: Respond to new issues
        if: ${{ github.event.action == 'opened' && github.event_name == 'issues' }}
        uses: peter-evans/create-or-update-comment@v3
        with:
          issue-number: ${{ github.event.issue.number }}
          body: |
            Hey @${{ github.actor }}, Welcome to ðŸ’–TelMedSphere !!! ðŸŽŠ
            Thanks for opening an issue! ðŸ™Œ Please wait for the issue to get reviewed. If it is relevant, it will get assigned to you.
            Happy Coding !!! âœ¨

      # Respond to closed issues
      - name: Respond to closed issues
        if: ${{ github.event.action == 'closed' && github.event_name == 'issues' }}
        uses: peter-evans/create-or-update-comment@v3
        with:
          issue-number: ${{ github.event.issue.number }}
          body: |
            Hello @${{ github.event.issue.user.login }}! Your issue #${{ github.event.issue.number }} has been closed.
            Thank you for your interest in ðŸ’–TelMedSphere !!! ðŸ™Œ

      # Respond to new PRs
      - name: Respond to new PRs
        if: ${{ github.event.action == 'opened' && github.event_name == 'pull_request' }}
        uses: peter-evans/create-or-update-comment@v3
        with:
          issue-number: ${{ github.event.pull_request.number }}
          body: |
            Hey @${{ github.actor }}, Welcome to ðŸ’–TelMedSphere !!! ðŸŽŠ
            Thanks for raising a PR! Your effort makes this project better. ðŸ™Œ
            Please wait for the PR to be reviewed.
            Happy Coding!! âœ¨

      # Respond to merged PRs
      - name: Respond to merged PRs
        if: ${{ github.event.action == 'closed' && github.event.pull_request.merged == true }}
        uses: peter-evans/create-or-update-comment@v3
        with:
          issue-number: ${{ github.event.pull_request.number }}
          body: |
            @${{ github.event.pull_request.user.login }} Congrats, Your pull request has been successfully merged ðŸ¥³ðŸŽ‰
            Thank you for your contribution to ðŸ’–TelMedSphere !!!
            Happy coding ðŸŽŠ, Keep Contributing ðŸ™Œ !!!

      # Respond to closed PRs (not merged)
      - name: Respond to closed PRs (not merged)
        if: ${{ github.event.action == 'closed' && github.event.pull_request.merged == false }}
        uses: peter-evans/create-or-update-comment@v3
        with:
          issue-number: ${{ github.event.pull_request.number }}
          body: |
            Hello @${{ github.event.pull_request.user.login }}, your PR #${{ github.event.pull_request.number }} has been closed without merging. ðŸ˜ž
            Don't be discouraged! Please feel free to address any review comments or reopen the PR if necessary.
            Thank you for your effort and interest in ðŸ’–TelMedSphere !!! ðŸ™Œ
